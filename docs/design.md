下面是第 1 份文档：**Design（需求与功能设计）**。我按你这个“教师签到管理系统”的 MVP 目标写得足够清晰，后面做架构/接口/数据库时可以直接对齐。

------

# Design — 教师签到管理系统（MVP 需求与功能设计）

## 1. 项目概述

本项目是一个面向教师使用的网页应用，用于管理课程、学生名单与签到记录，并提供周课程表展示与学生出勤统计。系统支持多教师账号登录，不同教师的数据相互隔离。

### 1.1 目标用户

- 教师（核心用户）：创建课程、管理学生、发起签到、查看统计

### 1.2 使用场景（典型流程）

1. 教师注册/登录
2. 新建课程 → 设置上课时间（哪一周星期几 + 起止时间）→ 设置计划总课次数（因为每周课程可能时间不一样，所以每一节课都要求可以自定义不同的时间）
3. 添加学生到课程（手动添加）
4. 在“本周课程表”里选择某节课 → 点击“开始本节课”生成课次 → 进入签到页面
5. 签到完成后保存
6. 查看课程统计（每个学生到课情况）或查看学生详情（明细记录）

------

## 2. 产品范围（MVP 必做与非必做）

### 2.1 MVP 必做功能（第一版交付）

- 多教师账号系统（注册/登录/退出）
- 课程管理（新增/编辑/删除/查看）
- 课程规则（每周上课日 + 开始/结束时间）
- 本周课程表（周视图/列表视图均可，至少支持“本周有哪些课”）
- 学生管理（创建学生、将学生加入/移除课程）
- 课次（开始本节课，生成一条上课记录）
- 签到（出勤状态记录：出勤/迟到/请假/缺勤）
- 统计（课程维度、学生维度：计划课次、实到、缺勤等）

------

## 3. 功能需求（按模块）

## 3.1 账号与权限（Auth）

### 3.1.1 注册

- 输入：姓名、邮箱、密码
- 规则：
  - 邮箱唯一
  - 密码最小长度（建议 ≥ 6）
- 输出：注册成功后可自动登录或跳转登录页

### 3.1.2 登录

- 输入：邮箱、密码
- 输出：登录成功获得会话（token/cookie）
- 权限规则：
  - 所有数据仅允许本人（教师）访问
  - 访问他人数据应返回无权限

### 3.1.3 退出

- 清除会话信息，回到登录页

------

## 3.2 课程管理（Course）

### 3.2.1 新建课程

教师可以创建课程，至少包含：

- 课程名称（必填）
- 上课地点（可选）
- 计划总课次数（必填，整数）
- 上课规则（必填）
  - 星期几（1-7）
  - 开始时间、结束时间

**验收标准**

- 课程创建后出现在课程列表
- 课程规则可在详情页显示

### 3.2.2 编辑课程

- 可编辑：名称、地点、计划总课次数、上课规则
- 修改后立即生效

### 3.2.3 删除课程

- 允许删除课程
- 删除后相关课次与签到记录不再可访问（是否物理删除由后端决定）

------

## 3.3 学生管理（Student）

### 3.3.1 创建学生（教师名下的学生库）

字段（MVP）：

- 姓名（必填）
- 学号（可选但建议填）
- 备注（可选）

### 3.3.2 将学生加入课程（课程名单）

- 在课程详情页：添加已有学生到课程
- 在课程详情页：从课程移除学生

**验收标准**

- 加入后，签到页会出现该学生
- 移除后，不在后续课次签到列表出现

------

## 3.4 周课程表（Schedule）

### 3.4.1 查看本周课程

- 显示本周周一到周日的课程安排（至少是列表形式）
- 每条课程显示：课程名、日期（本周对应日期）、时间、地点（可选）

### 3.4.2 快速进入签到

- 在课程表条目上点击“开始本节课”或“进入签到”
- 若本节课次未创建 → 创建课次并进入签到
- 若本节课次已创建（同课程同日期同时间）→ 直接进入该课次签到页（避免重复生成）

------

## 3.5 课次管理（Session）

### 3.5.1 开始本节课（创建课次）

- 输入：课程、日期（默认今天/课程表推荐日期）、开始结束时间（默认规则）
- 生成：一条课次记录（session）
- 同时为该课所有学生初始化签到记录

**初始化策略（建议）**

- 默认所有学生状态为 `present`（出勤），老师只需修改异常
  - 或默认 `absent`（缺勤），更严格但操作更慢
- MVP 推荐默认 `present`

### 3.5.2 查看课程历史课次

- 在课程详情页可查看历史课次列表
- 每个课次显示：日期、时间、已签到人数/总人数、课次状态（open/closed）

------

## 3.6 签到（Attendance）

### 3.6.1 签到页面

- 显示该课次学生列表
- 每个学生可设置出勤状态：
  - 出勤 present
  - 迟到 late
  - 请假 leave
  - 缺勤 absent
- 支持备注（可选）

### 3.6.2 常用操作（MVP 必须）

- 一键“全员出勤”
- 修改单个学生状态
- 保存签到（批量提交）

### 3.6.3 课次关闭（可选）

- 教师可把课次状态设为 closed（锁定或仍允许修改由后端策略决定）
- MVP：可以先不做锁定，先做关闭标记即可

------

## 3.7 统计与详情（Stats）

### 3.7.1 课程统计（课程详情页）

- 显示该课程：
  - 计划总课次数
  - 已产生课次数
  - 学生统计表（每个学生一行）：
    - 出勤/迟到/请假/缺勤次数
    - 出勤率（可选：按“出勤+迟到”算出勤）

### 3.7.2 学生详情（从课程里点开）

- 显示该学生在该课程的：
  - 计划总课次数
  - 出勤/迟到/请假/缺勤次数
  - 出勤率
  - 每次课的签到明细（日期 + 状态 + 备注）

------

## 4. 非功能需求（MVP 级别）

### 4.1 可用性

- 界面清晰、操作步骤少（默认全员出勤是关键）
- 手机浏览器可用（响应式布局即可）

### 4.2 性能

- 课程/学生数量在几百规模下操作顺畅
- 课程表与统计页面加载时间可接受（后端分页/聚合）

### 4.3 安全

- 密码必须 hash 存储
- 所有接口需要鉴权（除登录注册）
- 教师只能访问自己的资源

### 4.4 数据一致性

- 同一课次同一学生只有一条签到记录
- 同一课程同一日期时间避免重复生成课次

------

## 5. MVP 验收清单（“能交付”的定义）

- 教师能注册登录，并只看到自己的数据
- 能创建课程并设置每周上课时间与计划总节次
- 能添加学生并加入某门课
- 能在本周课程表看到本周课程，并能开始本节课生成课次
- 能在签到页一键全员出勤并修改异常，保存后数据持久化
- 能在课程详情看到每个学生的出勤统计
- 能点开学生详情看到该课程的明细签到记录

